<%= render 'shared/menu' %>
<%= render 'shared/current_user' %>

<h1>Edit Artist</h1>

<% if flash[:notice] %>
  <h2><%= flash[:notice] %></h2>
<% end %>

<% if @artist %>

  <%= form_with scope: :artist, local: true, url: "/artists/#{@artist.id}", :html=> {:method=>:put} do |form| %>

    <p>
      <%= form.label :id %>
      <%= form.text_field :id %>
    </p>
    <p>
      <%= form.label :name %>
      <%= form.text_field :name %>
    </p>
    <p>
      <%= form.label 'Add Images' %>
      <%= form.file_field :images, multiple: true %>
    </p>
    <p>
      <%= form.label :bio %>
    </p>
    <p>
      <%= form.text_area :bio, cols: 50, rows: 10 %>
    </p>
    <p>
      <%= form.label :biography %>
    </p>
    <p>
      <%= form.rich_text_area :biography %>
    </p>
    <p>
      <%= form.label :schedule %>
    </p>
    <p>
      <%= form.text_area :schedule, cols: 50, rows: 10 %>
    </p>
    <p>
      <%= form.submit 'Save' %>
    </p>
  <!-- End of form -->
  <% end %>

  <% @artist.images.each do |image| %>
  <p>
    <%= image_tag(image) %>
    <%=
      link_to 'Delete Image',
      "attachments/#{image.id}",
      data: { confirm: "Are you sure you want to delete #{image.filename.to_s}?" },
      method: :delete
    %>
  </p>
  <% end %>

  <% if @current_user.email == ENV['ADMIN_EMAIL'] %>
  <p>
    <%=
      button_to 'Delete Artist', artists_delete_path(@artist),
      data: { confirm: "Are you sure you want to delete #{@artist.name}?" },
      method: :delete
    %>
  </p>
  <% end %>
<% else %>
  <p>
    Artist not found
  </p>
<% end %>
