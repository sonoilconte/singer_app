<%= render 'shared/admin_menu' %>
<%= render 'shared/current_user' %>

<h1>Images</h1>

<% if @images && @images.length > 0  %>

<p>
<%=
link_to 'Add new image',
"/artists/#{@images[0].artist_id}/images/new"
%>
</p>

<% @images.each do |image| %>
<p>ID: <%= image.id %></p>
<p>Name: <%= image.name %></p>
<p>Category: <%= image.category %></p>
<p>Order: <%= image.order %></p>
<p>

  <% if image.file.attachment %>
  <%= image_tag(image.file) %>
  <% else %>
  <%= p 'No image file attachment found' %>
  <% end %>

  <%
  if image.file && image.file.attachment
    filename_string = image.file.filename.to_s
  else
    filename_string = 'unknown'
  end
  %>

  <p>
    <%=
    link_to 'View image',
    "/artists/#{image.artist_id}/images/#{image.id}"
    %>
  </p>
  <p>
  <%=
    link_to 'Edit image',
    "/artists/#{image.artist_id}/images/#{image.id}/edit"
  %>
  </p>
  <p>
    <%=
    link_to 'Delete Image',
    "/artists/#{image.artist_id}/images/#{image.id}",
    data: { confirm: "Are you sure you want to delete image with filename #{filename_string}" },
    method: :delete
    %>
  </p>

</p>
<hr>
<% end %>

<% else %>
  <p>
  <%= p "No images found" %>
  </p>
<% end %>
